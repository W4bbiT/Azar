{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/users.service\";\nimport * as i2 from \"src/app/services/products.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../feature-product/feature-product.component\";\nimport * as i5 from \"../top-product/top-product.component\";\nimport * as i6 from \"../side-bar/side-bar.component\";\nfunction HomePageComponent_div_5_div_1_p_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 26);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const product_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Only \", product_r3.inStock, \" in stock \");\n  }\n}\nfunction HomePageComponent_div_5_div_1_p_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 27);\n    i0.ɵɵtext(1, \"Out of stock\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction HomePageComponent_div_5_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 8)(1, \"div\", 9)(2, \"div\", 10)(3, \"a\", 11);\n    i0.ɵɵelement(4, \"img\", 12);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"h2\", 13);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\", 14);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"div\", 15);\n    i0.ɵɵtemplate(10, HomePageComponent_div_5_div_1_p_10_Template, 2, 1, \"p\", 16);\n    i0.ɵɵtemplate(11, HomePageComponent_div_5_div_1_p_11_Template, 2, 0, \"p\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 18)(13, \"p\", 19);\n    i0.ɵɵtext(14);\n    i0.ɵɵpipe(15, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function HomePageComponent_div_5_div_1_Template_button_click_16_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const product_r3 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r7.addToCart(product_r3._id));\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(17, \"svg\", 21);\n    i0.ɵɵelement(18, \"g\", 22)(19, \"g\", 23);\n    i0.ɵɵelementStart(20, \"g\", 24);\n    i0.ɵɵelement(21, \"path\", 25);\n    i0.ɵɵelementEnd()()()()()();\n  }\n  if (rf & 2) {\n    const product_r3 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate1(\"href\", \"/products/\", product_r3._id, \"\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", product_r3.productImage[0], i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r3.productName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r3.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", product_r3.inStock < 20 && product_r3.inStock > 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", product_r3.inStock < 1);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(15, 7, product_r3.price));\n  }\n}\nfunction HomePageComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6);\n    i0.ɵɵtemplate(1, HomePageComponent_div_5_div_1_Template, 22, 9, \"div\", 7);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.products);\n  }\n}\nfunction HomePageComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 28)(1, \"button\", 29);\n    i0.ɵɵlistener(\"click\", function HomePageComponent_div_6_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.previousPage());\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(2, \"svg\", 30);\n    i0.ɵɵelement(3, \"path\", 31);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(4, \"span\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"button\", 32);\n    i0.ɵɵlistener(\"click\", function HomePageComponent_div_6_Template_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.nextPage());\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(7, \"svg\", 30);\n    i0.ɵɵelement(8, \"path\", 33);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.currentPage === 1);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate2(\" Page \", ctx_r1.currentPage, \" of \", ctx_r1.totalPages, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.currentPage === ctx_r1.totalPages);\n  }\n}\nexport let HomePageComponent = /*#__PURE__*/(() => {\n  class HomePageComponent {\n    constructor(userService, productService) {\n      this.userService = userService;\n      this.productService = productService;\n      this.currentPage = 1;\n      this.limit = 50;\n    }\n    ngOnInit() {\n      this.fetchProducts();\n    }\n    fetchProducts() {\n      if (this.selectedCategory.length > 0 && !this.selectedCategory.includes('/')) {\n        this.productService.searchCategory(this.selectedCategory, this.currentPage, this.limit).subscribe({\n          next: products => {\n            this.products = products;\n            // You might need to update totalPages based on the response from the API\n          },\n\n          error: () => {\n            alert(\"No products found for the selected category!\");\n          }\n        });\n      } else {\n        this.productService.getAllProducts(this.currentPage, this.limit).subscribe({\n          next: response => {\n            this.products = response.products;\n            this.totalPages = response.totalPages;\n          },\n          error: () => {\n            alert(\"No products found!\");\n          }\n        });\n      }\n    }\n    onCategory(categories) {\n      this.selectedCategory = categories; // Set the selected category\n      this.fetchProducts(); // Fetch products for the selected category\n    }\n\n    isSelectedCategory(categories) {\n      return categories.every(category => this.selectedCategory.includes(category));\n    }\n    previousPage() {\n      if (this.currentPage > 1) {\n        this.currentPage--;\n        this.fetchProducts();\n      }\n    }\n    nextPage() {\n      if (this.currentPage < this.totalPages) {\n        this.currentPage++;\n        this.fetchProducts();\n      }\n    }\n    addToCart(productId) {\n      this.userService.addProductToMyCart(productId, this.cart).subscribe({\n        next: res => {\n          alert(\"Product added to cart successfully\");\n        },\n        error: () => {\n          alert(\"Product not added to your cart for some reason\");\n        }\n      });\n    }\n  }\n  HomePageComponent.ɵfac = function HomePageComponent_Factory(t) {\n    return new (t || HomePageComponent)(i0.ɵɵdirectiveInject(i1.UsersService), i0.ɵɵdirectiveInject(i2.ProductsService));\n  };\n  HomePageComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: HomePageComponent,\n    selectors: [[\"app-home-page\"]],\n    decls: 8,\n    vars: 3,\n    consts: [[1, \"flex\", \"text-whiteish\"], [1, \"w-60\"], [3, \"selectedCategory\", \"categoryChange\"], [1, \"p-5\"], [\"class\", \"flex flex-wrap\", 4, \"ngIf\"], [\"class\", \"flex justify-center text-white items-center mb-5\", 4, \"ngIf\"], [1, \"flex\", \"flex-wrap\"], [\"class\", \"m-5\", 4, \"ngFor\", \"ngForOf\"], [1, \"m-5\"], [1, \"card\", \"w-64\", \"h-fit\", \"p-2\", \"rounded-3xl\", \"glass\"], [1, \"card-img\", \"rounded-3xl\"], [3, \"href\"], [\"alt\", \"Product Image\", 1, \"rounded-3xl\", \"w-64\", \"h-40\", \"object-cover\", 3, \"src\"], [1, \"text-xl\", \"font-semibold\", \"mt-5\"], [1, \"h-7\", \"overflow-hidden\", \"text-ellipsis\"], [1, \"text-right\"], [\"class\", \"text-red-600\", 4, \"ngIf\"], [\"class\", \"text-red-500\", 4, \"ngIf\"], [1, \"card-footer\"], [1, \"\"], [1, \"card-button\", \"shadow-sm\", \"shadow-reddish\", \"p-2\", \"active:shadow-inner\", 3, \"click\"], [\"fill\", \"#990011FF\", \"width\", \"64px\", \"height\", \"64px\", \"viewBox\", \"-3.2 -3.2 38.40 38.40\", \"version\", \"1.1\", \"xmlns\", \"http://www.w3.org/2000/svg\", \"stroke\", \"#990011FF\", \"stroke-width\", \"0.00032\"], [\"id\", \"SVGRepo_bgCarrier\", \"stroke-width\", \"0\"], [\"id\", \"SVGRepo_tracerCarrier\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\"], [\"id\", \"SVGRepo_iconCarrier\"], [\"d\", \"M16 0c-8.836 0-16 7.163-16 16s7.163 16 16 16c8.837 0 16-7.163 16-16s-7.163-16-16-16zM16 30.032c-7.72 0-14-6.312-14-14.032s6.28-14 14-14 14 6.28 14 14-6.28 14.032-14 14.032zM23 15h-6v-6c0-0.552-0.448-1-1-1s-1 0.448-1 1v6h-6c-0.552 0-1 0.448-1 1s0.448 1 1 1h6v6c0 0.552 0.448 1 1 1s1-0.448 1-1v-6h6c0.552 0 1-0.448 1-1s-0.448-1-1-1z\"], [1, \"text-red-600\"], [1, \"text-red-500\"], [1, \"flex\", \"justify-center\", \"text-white\", \"items-center\", \"mb-5\"], [1, \"p-1\", \"shadow-sm\", \"shadow-reddish\", \"rounded-full\", \"mr-2\", \"active:shadow-inner\", \"active:shadow-reddish\", 3, \"disabled\", \"click\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"fill\", \"none\", \"viewBox\", \"0 0 24 24\", \"stroke-width\", \"1.5\", \"stroke\", \"currentColor\", 1, \"w-6\", \"h-6\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"d\", \"M15.75 19.5L8.25 12l7.5-7.5\"], [1, \"p-1\", \"shadow-sm\", \"shadow-reddish\", \"rounded-full\", \"ml-2\", \"active:shadow-inner\", \"active:shadow-reddish\", 3, \"disabled\", \"click\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"d\", \"M8.25 4.5l7.5 7.5-7.5 7.5\"]],\n    template: function HomePageComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-feature-product\");\n        i0.ɵɵelementStart(1, \"div\", 0)(2, \"div\", 1)(3, \"app-side-bar\", 2);\n        i0.ɵɵlistener(\"categoryChange\", function HomePageComponent_Template_app_side_bar_categoryChange_3_listener($event) {\n          return ctx.onCategory($event);\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(4, \"div\", 3);\n        i0.ɵɵtemplate(5, HomePageComponent_div_5_Template, 2, 1, \"div\", 4);\n        i0.ɵɵtemplate(6, HomePageComponent_div_6_Template, 9, 4, \"div\", 5);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(7, \"app-top-product\");\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"selectedCategory\", ctx.selectedCategory);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.products);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.totalPages > 1);\n      }\n    },\n    dependencies: [i3.NgForOf, i3.NgIf, i4.FeatureProductComponent, i5.TopProductComponent, i6.SideBarComponent, i3.CurrencyPipe],\n    styles: [\".card[_ngcontent-%COMP%]{position:relative;overflow:visible}.card-img[_ngcontent-%COMP%]{transition:.2s ease}svg[_ngcontent-%COMP%]{width:25px;height:25px}.card-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-top:10px;border-top:1px solid #990011FF}.card-button[_ngcontent-%COMP%]{display:flex;cursor:pointer;border-radius:50px;transition:.2s ease-in-out}.card-img[_ngcontent-%COMP%]:hover{transform:translateY(-25%);box-shadow:#ff000040 0 13px 47px -5px,#ff00004d 0 8px 16px -8px}.glass[_ngcontent-%COMP%]{background:rgba(50,50,50,.5);backdrop-filter:blur(15px);-webkit-backdrop-filter:blur(15px)}h2[_ngcontent-%COMP%]{font-family:sans-serif;font-size:1rem;padding-right:10px}\"]\n  });\n  return HomePageComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}