{"ast":null,"code":"import { Arrow } from \"@egjs/flicking-plugins\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/products.service\";\nimport * as i3 from \"src/app/services/users.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@egjs/ngx-flicking\";\nfunction GetOneProductComponent_div_1_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵelement(1, \"img\", 19);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const image_r5 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", image_r5, i0.ɵɵsanitizeUrl);\n  }\n}\nconst _c0 = function () {\n  return {\n    circular: true,\n    panelsPerView: 1\n  };\n};\nfunction GetOneProductComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"div\", 6)(2, \"div\")(3, \"ngx-flicking\", 7);\n    i0.ɵɵtemplate(4, GetOneProductComponent_div_1_div_4_Template, 2, 1, \"div\", 8);\n    i0.ɵɵelement(5, \"span\", 9)(6, \"span\", 10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 11)(8, \"h2\", 12);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"p\", 13);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"p\", 14);\n    i0.ɵɵtext(13);\n    i0.ɵɵpipe(14, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"p\", 13);\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"p\", 13);\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"div\", 15)(20, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function GetOneProductComponent_div_1_Template_button_click_20_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.addToCart(ctx_r6.product._id));\n    });\n    i0.ɵɵtext(21, \" Add to Cart \");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(22, \"div\", 11)(23, \"h3\", 17);\n    i0.ɵɵtext(24, \"Details\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"p\", 13);\n    i0.ɵɵtext(26);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"p\", 13);\n    i0.ɵɵtext(28);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"p\", 13);\n    i0.ɵɵtext(30);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"options\", i0.ɵɵpureFunction0(13, _c0))(\"plugins\", ctx_r0.plugins);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.product.productImage);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r0.product.productName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Description: \", ctx_r0.product.description, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Price: \", i0.ɵɵpipeBind1(14, 11, ctx_r0.product.price), \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Category: \", ctx_r0.product.category, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"In Stock: \", ctx_r0.product.inStock, \"\");\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate1(\"Size: \", ctx_r0.product.details.size, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Color: \", ctx_r0.product.details.color, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Info: \", ctx_r0.product.details.info, \"\");\n  }\n}\nfunction GetOneProductComponent_div_2_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 27)(1, \"div\", 28)(2, \"div\", 29);\n    i0.ɵɵelement(3, \"img\", 30);\n    i0.ɵɵelementStart(4, \"div\")(5, \"p\", 31);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(9, \"div\")(10, \"p\");\n    i0.ɵɵtext(11, \"Rating: \");\n    i0.ɵɵelementStart(12, \"span\", 32);\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(14, \"div\")(15, \"p\", 25);\n    i0.ɵɵtext(16);\n    i0.ɵɵpipe(17, \"date\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(18, \"p\");\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const review_r9 = ctx.$implicit;\n    const ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"src\", review_r9.user.profileImage, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(review_r9.user.fName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"State: \", review_r9.user.address.state, \"\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r8.getStarRating(review_r9.rating));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(17, 6, review_r9.reviewDate));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(review_r9.review);\n  }\n}\nfunction GetOneProductComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20)(1, \"div\", 21)(2, \"h3\", 22);\n    i0.ɵɵtext(3, \"Product Reviews:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 23)(5, \"div\")(6, \"h1\", 24);\n    i0.ɵɵtext(7, \"\\u2605\\u2605\\u2605\\u2605\\u2605\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\")(9, \"span\", 25);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵtemplate(11, GetOneProductComponent_div_2_div_11_Template, 20, 8, \"div\", 26);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵstyleProp(\"width\", ctx_r1.avgRate, \"%\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"from \", ctx_r1.reviews.totalCount, \" reviews\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.reviews.reviews);\n  }\n}\nfunction GetOneProductComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 33)(1, \"h3\", 34);\n    i0.ɵɵtext(2, \"No reviews yet\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction GetOneProductComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 35)(1, \"button\", 36);\n    i0.ɵɵlistener(\"click\", function GetOneProductComponent_div_4_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.previousPage());\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(2, \"svg\", 37);\n    i0.ɵɵelement(3, \"path\", 38);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(4, \"span\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"button\", 39);\n    i0.ɵɵlistener(\"click\", function GetOneProductComponent_div_4_Template_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.nextPage());\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(7, \"svg\", 37);\n    i0.ɵɵelement(8, \"path\", 40);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", ctx_r3.page === 1);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate2(\" Page \", ctx_r3.page, \" of \", ctx_r3.reviews.totalPages, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", ctx_r3.page === ctx_r3.reviews.totalPages);\n  }\n}\nexport let GetOneProductComponent = /*#__PURE__*/(() => {\n  class GetOneProductComponent {\n    constructor(route, productService, userService) {\n      this.route = route;\n      this.productService = productService;\n      this.userService = userService;\n      this.page = 1;\n      this.limit = 10;\n      this.avgRate = 0;\n      this.plugins = [new Arrow()];\n    }\n    ngOnInit() {\n      this.pId = this.route.snapshot.paramMap.get('pId');\n      this.productService.getOneProduct(this.pId).subscribe({\n        next: res => {\n          if (res) {\n            this.product = res;\n          }\n        },\n        error: err => {\n          if (err.status === 401) {\n            alert('No products found!');\n          }\n          console.log(err);\n        }\n      });\n      this.getReviews();\n    }\n    getReviews() {\n      this.productService.getProductReviews(this.pId, this.page, this.limit).subscribe({\n        next: res => {\n          this.reviews = res;\n          this.avgRate = res.averageRating / 5 * 100;\n          console.log(this.reviews);\n        },\n        error: err => {\n          console.log(err);\n        }\n      });\n    }\n    previousPage() {\n      if (this.page > 1) {\n        this.page--;\n        this.getReviews();\n      }\n    }\n    nextPage() {\n      // Assuming you have the total number of reviews available\n      const totalReviews = this.reviews.totalCount;\n      const totalPages = Math.ceil(totalReviews / this.limit);\n      if (this.page < totalPages) {\n        this.page++;\n        this.getReviews();\n      }\n    }\n    // Helper function to convert rating to star icons\n    getStarRating(rating) {\n      const filledStar = '★';\n      const emptyStar = '☆';\n      const maxRating = 5;\n      const roundedRating = Math.round(rating);\n      return filledStar.repeat(roundedRating) + emptyStar.repeat(maxRating - roundedRating);\n    }\n    addToCart(productId) {\n      this.userService.addProductToMyCart(productId, this.cart).subscribe({\n        next: res => {\n          alert(\"Product added to cart successfully\");\n        },\n        error: () => {\n          alert(\"Product not added to your cart for some reason\");\n        }\n      });\n    }\n  }\n  GetOneProductComponent.ɵfac = function GetOneProductComponent_Factory(t) {\n    return new (t || GetOneProductComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.ProductsService), i0.ɵɵdirectiveInject(i3.UsersService));\n  };\n  GetOneProductComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: GetOneProductComponent,\n    selectors: [[\"app-get-one-product\"]],\n    decls: 5,\n    vars: 4,\n    consts: [[1, \"shadow-reddish\", \"my-5\", \"rounded-3xl\", \"text-whiteish\"], [\"class\", \"\", 4, \"ngIf\"], [\"class\", \"shadow-sm shadow-reddish p-1 rounded-3xl\", 4, \"ngIf\"], [\"class\", \"flex justify-center\", 4, \"ngIf\"], [\"class\", \"flex justify-center text-reddish items-center mb-5\", 4, \"ngIf\"], [1, \"\"], [1, \"md:flex\"], [1, \"h-96\", \"w-96\", 3, \"options\", \"plugins\"], [\"flicking-panel\", \"\", \"class\", \"card-panel\", 4, \"ngFor\", \"ngForOf\"], [\"in-viewport\", \"\", 1, \"flicking-arrow-prev\"], [\"in-viewport\", \"\", 1, \"flicking-arrow-next\"], [1, \"px-5\"], [1, \"text-2xl\", \"font-bold\", \"mb-4\"], [1, \"mb-4\"], [1, \"text-lg\", \"font-bold\", \"mb-2\"], [1, \"float-right\"], [1, \"shadow-sm\", \"shadow-blackish\", \"font-bold\", \"py-2\", \"px-4\", \"rounded-full\", \"active:shadow:inner\", \"active:shadow:blackish\", 3, \"click\"], [1, \"text-xl\", \"font-bold\"], [\"flicking-panel\", \"\", 1, \"card-panel\"], [1, \"h-96\", \"w-96\", \"object-contain\", 3, \"src\"], [1, \"shadow-sm\", \"shadow-reddish\", \"p-1\", \"rounded-3xl\"], [1, \"flex\", \"justify-between\", \"m-5\"], [1, \"text-lg\", \"font-semibold\"], [1, \"text-right\", \"justify-center\"], [1, \"text-3xl\", \"text-yellow-500\", \"text-opacity-30\", \"bg-yellow-500\", \"bg-cover\", \"bg-clip-text\"], [1, \"text-sm\"], [\"class\", \"border-t-2 rounded-3xl p-4\", 4, \"ngFor\", \"ngForOf\"], [1, \"border-t-2\", \"rounded-3xl\", \"p-4\"], [1, \"flex\", \"justify-between\"], [1, \"flex\", \"items-center\", \"mb-2\"], [\"alt\", \"User Profile Image\", 1, \"w-10\", \"h-10\", \"rounded-full\", \"mr-4\", 3, \"src\"], [1, \"font-bold\"], [1, \"text-yellow-500\"], [1, \"flex\", \"justify-center\"], [1, \"p-2\", \"shadow-sm\", \"shadow-reddish\", \"rounded-full\"], [1, \"flex\", \"justify-center\", \"text-reddish\", \"items-center\", \"mb-5\"], [1, \"p-1\", \"shadow-sm\", \"shadow-reddish\", \"rounded-full\", \"mr-2\", \"active:shadow-inner\", \"active:shadow-reddish\", 3, \"disabled\", \"click\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"fill\", \"none\", \"viewBox\", \"0 0 24 24\", \"stroke-width\", \"1.5\", \"stroke\", \"currentColor\", 1, \"w-6\", \"h-6\", \"stroke-reddish\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"d\", \"M15.75 19.5L8.25 12l7.5-7.5\"], [1, \"p-1\", \"shadow-sm\", \"shadow-reddish\", \"rounded-full\", \"ml-2\", \"active:shadow-inner\", \"active:shadow-reddish\", 3, \"disabled\", \"click\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"d\", \"M8.25 4.5l7.5 7.5-7.5 7.5\"]],\n    template: function GetOneProductComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, GetOneProductComponent_div_1_Template, 31, 14, \"div\", 1);\n        i0.ɵɵtemplate(2, GetOneProductComponent_div_2_Template, 12, 4, \"div\", 2);\n        i0.ɵɵtemplate(3, GetOneProductComponent_div_3_Template, 3, 0, \"div\", 3);\n        i0.ɵɵtemplate(4, GetOneProductComponent_div_4_Template, 9, 4, \"div\", 4);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.product);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.reviews);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.reviews);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", (ctx.reviews == null ? null : ctx.reviews.totalPages) > 1);\n      }\n    },\n    dependencies: [i4.NgForOf, i4.NgIf, i5.NgxFlickingComponent, i5.NgxFlickingPanel, i4.CurrencyPipe, i4.DatePipe],\n    styles: [\".flicking-pagination[_ngcontent-%COMP%]{position:absolute;left:0;bottom:10px;width:100%;text-align:center;z-index:2}.flicking-pagination-bullets[_ngcontent-%COMP%], .flicking-pagination-scroll[_ngcontent-%COMP%]{font-size:0}.flicking-pagination-scroll[_ngcontent-%COMP%]{left:50%;transform:translate(-50%);white-space:nowrap;overflow:hidden}.flicking-pagination-scroll[_ngcontent-%COMP%]   .flicking-pagination-slider[_ngcontent-%COMP%]{transition:.2s transform}.flicking-pagination-scroll.flicking-pagination-uninitialized[_ngcontent-%COMP%]   .flicking-pagination-slider[_ngcontent-%COMP%], .flicking-pagination-scroll.flicking-pagination-uninitialized[_ngcontent-%COMP%]   .flicking-pagination-bullet[_ngcontent-%COMP%]{transition:none}.flicking-pagination-bullet[_ngcontent-%COMP%]{display:inline-block;width:8px;height:8px;margin:0 4px;border-radius:50%;background-color:#0a0a0a1a;cursor:pointer;font-size:1rem}.flicking-pagination-scroll[_ngcontent-%COMP%]   .flicking-pagination-bullet[_ngcontent-%COMP%]{vertical-align:middle;position:relative;transition:.2s transform}.flicking-pagination-bullet-active[_ngcontent-%COMP%]{background-color:#f2a65e}.flicking-pagination-scroll[_ngcontent-%COMP%]   .flicking-pagination-bullet[_ngcontent-%COMP%]{vertical-align:middle;position:relative;transition:.2s transform,.2s left;transform:scale(0)}.flicking-pagination-scroll[_ngcontent-%COMP%]   .flicking-pagination-bullet-active[_ngcontent-%COMP%]{transform:scale(1)}.flicking-pagination-scroll[_ngcontent-%COMP%]   .flicking-pagination-bullet-prev[_ngcontent-%COMP%], .flicking-pagination-scroll[_ngcontent-%COMP%]   .flicking-pagination-bullet-next[_ngcontent-%COMP%]{transform:scale(.66)}.flicking-pagination-scroll[_ngcontent-%COMP%]   .flicking-pagination-bullet-prev2[_ngcontent-%COMP%], .flicking-pagination-scroll[_ngcontent-%COMP%]   .flicking-pagination-bullet-next2[_ngcontent-%COMP%]{transform:scale(.33)}.flicking-arrow-prev[_ngcontent-%COMP%], .flicking-arrow-next[_ngcontent-%COMP%]{position:absolute;top:50%;width:64px;height:64px;cursor:pointer;transform:translateY(-50%);z-index:2}.flicking-arrow-prev.is-circle[_ngcontent-%COMP%], .flicking-arrow-next.is-circle[_ngcontent-%COMP%]{background-color:#f2a65e;border-radius:50%}.flicking-arrow-disabled.is-circle[_ngcontent-%COMP%]{background-color:#0a0a0a1a}.flicking-arrow-prev.is-circle[_ngcontent-%COMP%]:before, .flicking-arrow-prev.is-circle[_ngcontent-%COMP%]:after, .flicking-arrow-next.is-circle[_ngcontent-%COMP%]:before, .flicking-arrow-next.is-circle[_ngcontent-%COMP%]:after{background-color:#fff}.flicking-arrow-prev[_ngcontent-%COMP%]{left:10px}.flicking-arrow-next[_ngcontent-%COMP%]{right:10px}.flicking-arrow-prev.is-outside[_ngcontent-%COMP%]{left:-74px}.flicking-arrow-next.is-outside[_ngcontent-%COMP%]{right:-74px}.flicking-arrow-prev[_ngcontent-%COMP%]:before, .flicking-arrow-prev[_ngcontent-%COMP%]:after, .flicking-arrow-next[_ngcontent-%COMP%]:before, .flicking-arrow-next[_ngcontent-%COMP%]:after{content:\\\"\\\";width:24px;height:6px;position:absolute;background-color:#f2a65e}.flicking-arrow-prev[_ngcontent-%COMP%]:before{top:50%;left:22px;transform:rotate(-45deg);transform-origin:0% 50%}.flicking-arrow-prev[_ngcontent-%COMP%]:after{top:calc(50% - 4px);left:22px;transform:rotate(45deg);transform-origin:0% 50%}.flicking-arrow-next[_ngcontent-%COMP%]:before{top:50%;right:22px;transform:rotate(45deg);transform-origin:100% 50%}.flicking-arrow-next[_ngcontent-%COMP%]:after{top:calc(50% - 4px);right:22px;transform:rotate(-45deg);transform-origin:100% 50%}.flicking-arrow-disabled[_ngcontent-%COMP%]{cursor:default}.flicking-arrow-disabled[_ngcontent-%COMP%]:before, .flicking-arrow-disabled[_ngcontent-%COMP%]:after{background-color:#e6e6e6}.flicking-arrow-prev.is-thin[_ngcontent-%COMP%]:before, .flicking-arrow-prev.is-thin[_ngcontent-%COMP%]:after, .flicking-arrow-next.is-thin[_ngcontent-%COMP%]:before, .flicking-arrow-next.is-thin[_ngcontent-%COMP%]:after{height:3px}.flicking-arrow-prev.is-thin[_ngcontent-%COMP%]:after, .flicking-arrow-next.is-thin[_ngcontent-%COMP%]:after{top:calc(50% - 2px)}\"]\n  });\n  return GetOneProductComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}