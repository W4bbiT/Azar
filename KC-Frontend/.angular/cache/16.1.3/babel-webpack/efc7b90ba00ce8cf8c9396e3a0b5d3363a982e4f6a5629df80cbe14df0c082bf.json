{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/users.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction GetAllCartComponent_div_0_tr_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\", 13)(1, \"td\", 14)(2, \"a\", 15);\n    i0.ɵɵelement(3, \"img\", 16);\n    i0.ɵɵelementStart(4, \"p\", 17);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(6, \"td\", 18)(7, \"input\", 19);\n    i0.ɵɵlistener(\"ngModelChange\", function GetAllCartComponent_div_0_tr_17_Template_input_ngModelChange_7_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const c_r2 = restoredCtx.$implicit;\n      return i0.ɵɵresetView(c_r2.quantity = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function GetAllCartComponent_div_0_tr_17_Template_button_click_8_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const c_r2 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r5.updateQuantity(c_r2.productId._id));\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(9, \"svg\", 4);\n    i0.ɵɵelement(10, \"path\", 21);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(11, \"td\", 14);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\", 14)(14, \"button\", 22);\n    i0.ɵɵlistener(\"click\", function GetAllCartComponent_div_0_tr_17_Template_button_click_14_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const c_r2 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.pullProduct(c_r2.productId._id));\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(15, \"svg\", 4);\n    i0.ɵɵelement(16, \"path\", 23);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const c_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"href\", \"/products/\", c_r2.productId._id, \"\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", c_r2.productId.productImage, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(c_r2.productId.productName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", c_r2.quantity);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"$\", (c_r2.quantity * (c_r2.price - c_r2.discount / 100 * c_r2.price)).toFixed(2), \"\");\n  }\n}\nfunction GetAllCartComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2)(2, \"button\", 3);\n    i0.ɵɵlistener(\"click\", function GetAllCartComponent_div_0_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.emptyTheCart());\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(3, \"svg\", 4);\n    i0.ɵɵelement(4, \"path\", 5);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(5, \"table\")(6, \"thead\")(7, \"tr\", 6)(8, \"th\", 7);\n    i0.ɵɵtext(9, \"Product Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\", 7);\n    i0.ɵɵtext(11, \"Quantity\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\", 7);\n    i0.ɵɵtext(13, \"Unit Price\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"th\", 7);\n    i0.ɵɵtext(15, \"Action\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(16, \"tbody\");\n    i0.ɵɵtemplate(17, GetAllCartComponent_div_0_tr_17_Template, 17, 5, \"tr\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"tfoot\")(19, \"tr\")(20, \"td\", 9);\n    i0.ɵɵtext(21, \"Total:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"td\", 10);\n    i0.ɵɵtext(23);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(24, \"td\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(25, \"div\", 11)(26, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function GetAllCartComponent_div_0_Template_button_click_26_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.checkingOut());\n    });\n    i0.ɵɵtext(27, \"Place Order\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(17);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.cart.products);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(ctx_r0.cart.total);\n  }\n}\nexport let GetAllCartComponent = /*#__PURE__*/(() => {\n  class GetAllCartComponent {\n    constructor(userService) {\n      this.userService = userService;\n    }\n    ngOnInit() {\n      this.userService.getCartForUser().subscribe({\n        next: data => {\n          this.cart = data;\n        },\n        error: error => {\n          console.error('Error retrieving cart data:', error);\n          this.error = 'Error retrieving cart data. Please try again later.';\n        }\n      });\n    }\n    emptyTheCart() {\n      this.userService.emptyCart().subscribe({\n        next: res => {\n          alert('Empty Cart');\n          location.reload();\n        },\n        error: error => {\n          console.error('Error:', error);\n          alert('Error. Please try again.');\n        }\n      });\n    }\n    updateQuantity(pId) {\n      this.userService.updateCart(pId, this.cart).subscribe({\n        next: res => {\n          alert('Update Success');\n          this.refreshCart();\n        },\n        error: error => {\n          console.error('Error updating quantity:', error);\n          alert('Error updating quantity. Please try again.');\n        }\n      });\n    }\n    pullProduct(pId) {\n      this.userService.pullProductFromCart(pId).subscribe({\n        next: res => {\n          alert('Product deleted from cart successfully');\n          this.refreshCart();\n        },\n        error: error => {\n          console.error('Error deleting product from cart:', error);\n          alert('Product not found or an error occurred. Please try again.');\n        }\n      });\n    }\n    checkingOut() {\n      this.userService.checkoutCart().subscribe({\n        next: res => {\n          alert('Order placed successfully');\n          this.refreshCart();\n        },\n        error: error => {\n          console.error('Error placing order:', error);\n          alert(\"Can't place the order for some reason! Please contact support.\");\n        }\n      });\n    }\n    refreshCart() {\n      this.userService.getCartForUser().subscribe({\n        next: data => {\n          this.cart = data;\n        },\n        error: error => {\n          console.error('Error refreshing cart data:', error);\n          this.error = 'Error refreshing cart data. Please try again later.';\n        }\n      });\n    }\n  }\n  GetAllCartComponent.ɵfac = function GetAllCartComponent_Factory(t) {\n    return new (t || GetAllCartComponent)(i0.ɵɵdirectiveInject(i1.UsersService));\n  };\n  GetAllCartComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: GetAllCartComponent,\n    selectors: [[\"app-get-all-cart\"]],\n    decls: 1,\n    vars: 1,\n    consts: [[\"class\", \"glass rounded-l-3xl p-5 text-reddish shadow-md shadow-reddish\", 4, \"ngIf\"], [1, \"glass\", \"rounded-l-3xl\", \"p-5\", \"text-reddish\", \"shadow-md\", \"shadow-reddish\"], [1, \"text-right\"], [1, \"p-2\", \"shadow-sm\", \"shadow-reddish\", \"rounded-full\", \"active:shadow-inner\", \"active:shadow-reddish\", \"bg-black\", \"text-whiteish\", 3, \"click\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"fill\", \"none\", \"viewBox\", \"0 0 24 24\", \"stroke-width\", \"1.5\", \"stroke\", \"currentColor\", 1, \"w-6\", \"h-6\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"d\", \"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"], [1, \"shadow-sm\"], [1, \"py-2\", \"px-2\"], [\"class\", \"my-2 shadow-md\", 4, \"ngFor\", \"ngForOf\"], [\"colspan\", \"2\", 1, \"font-bold\"], [1, \"font-bold\"], [1, \"text-right\", \"text-lg\"], [1, \"text-whiteish\", \"shadow-sm\", \"shadow-reddish\", \"p-1\", \"rounded-full\", \"bg-emerald-500\", \"active:shadow-inner\", \"active:shadow-reddish\", 3, \"click\"], [1, \"my-2\", \"shadow-md\"], [1, \"py-4\"], [1, \"flex\", \"flex-col\", \"items-center\", 3, \"href\"], [1, \"w-16\", \"h-16\", \"object-contain\", \"rounded-lg\", 3, \"src\"], [1, \"text-sm\"], [1, \"p-4\", \"items-center\"], [\"type\", \"number\", 1, \"shadow-inner\", \"shadow-reddish\", \"rounded-full\", \"w-16\", \"px-2\", \"py-1\", 3, \"ngModel\", \"ngModelChange\"], [1, \"text-whiteish\", \"shadow-reddish\", \"shadow-sm\", \"bg-blue-300\", \"rounded-full\", \"p-1\", \"ml-2\", \"active:shadow-inner\", \"active:shadow-reddish\", 3, \"click\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"d\", \"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99\"], [1, \"text-whiteish\", \"shadow-reddish\", \"shadow-sm\", \"bg-red-500\", \"rounded-full\", \"p-1\", \"active:shadow-inner\", \"active:shadow-reddish\", 3, \"click\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"d\", \"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0\"]],\n    template: function GetAllCartComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, GetAllCartComponent_div_0_Template, 28, 2, \"div\", 0);\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.cart);\n      }\n    },\n    dependencies: [i2.NgForOf, i2.NgIf, i3.DefaultValueAccessor, i3.NumberValueAccessor, i3.NgControlStatus, i3.NgModel],\n    styles: [\".glass[_ngcontent-%COMP%]{background:rgba(252,246,245,.7);backdrop-filter:blur(15px);-webkit-backdrop-filter:blur(15px)}\"]\n  });\n  return GetAllCartComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}